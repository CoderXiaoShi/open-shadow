{
  "permissions": {
    "allow": [
      "Bash(wc:*)",
      "Bash(cd:*)",
      "Bash(test:*)",
      "Bash(cd \"D:\\\\sxl\\\\github\\\\open-shadow\\\\admin\\\\server\" && npm run init 2>&1)",
      "Bash(cd \"D:/sxl/github/open-shadow/admin/server\" && node -e \"require\\('./models/material'\\); require\\('./controllers/materialController'\\); console.log\\('OK'\\)\" 2>&1)",
      "Bash(tail:*)",
      "Bash(mysql:*)",
      "Bash(cd /d/sxl/github/open-shadow/admin/server && npm run init 2>&1)",
      "Bash(cd /d/sxl/github/open-shadow/admin/server && node -e \"\nrequire\\('./models/persona'\\);\nconst svc = require\\('./services/aiAgentService'\\);\nconst ctl = require\\('./controllers/aiAgentController'\\);\nconsole.log\\('service:', Object.keys\\(svc\\)\\);\nconsole.log\\('controller:', Object.keys\\(ctl\\)\\);\n\" 2>&1)",
      "Bash(cd /d/sxl/github/open-shadow/admin/server && node -e \"const s = require\\('./services/aiAgentService'\\); console.log\\(Object.keys\\(s\\)\\)\" 2>&1)",
      "Bash(cd /d/sxl/github/open-shadow/admin/server && node -e \"\nconst sequelize = require\\('./config/database'\\);\n\\(async \\(\\) => {\n  const [rows] = await sequelize.query\\('SELECT id, LENGTH\\(role_definition\\) as rd_len, LEFT\\(role_definition,50\\) as rd_preview, LEFT\\(system_prompt,50\\) as sp_preview FROM persona LIMIT 1'\\);\n  console.log\\(JSON.stringify\\(rows, null, 2\\)\\);\n  await sequelize.close\\(\\);\n}\\)\\(\\);\n\" 2>&1)",
      "Bash(cd /d/sxl/github/open-shadow/admin/server && node -e \"\nconst personaService = require\\('./services/personaService'\\);\n\\(async \\(\\) => {\n  const p = await personaService.get\\(\\);\n  console.log\\('role_definition length:', p.role_definition?.length ?? 'NULL'\\);\n  console.log\\('system_prompt length:', p.system_prompt?.length ?? 'NULL'\\);\n  console.log\\('Fields returned:', Object.keys\\(p.dataValues\\)\\);\n  process.exit\\(0\\);\n}\\)\\(\\).catch\\(e => { console.error\\(e.message\\); process.exit\\(1\\); }\\);\n\" 2>&1)",
      "Bash(cd /d/sxl/github/open-shadow/admin/server && node -e \"\n// 直接模拟 _prepare 逻辑\nconst personaService = require\\('./services/personaService'\\);\n\\(async \\(\\) => {\n  const persona = await personaService.get\\(\\);\n  const systemPrompt = persona.role_definition || persona.system_prompt || '';\n  console.log\\('systemPrompt is empty:', !systemPrompt\\);\n  console.log\\('systemPrompt length:', systemPrompt.length\\);\n  console.log\\('first 100 chars:', systemPrompt.slice\\(0, 100\\)\\);\n  process.exit\\(0\\);\n}\\)\\(\\).catch\\(e => { console.error\\(e.message\\); process.exit\\(1\\); }\\);\n\" 2>&1)",
      "Bash(cd /d/sxl/github/open-shadow/admin/server && node -e \"\nconst personaService = require\\('./services/personaService'\\);\npersonaService.get\\(\\).then\\(p => {\n  const sp = p.role_definition || p.system_prompt || '';\n  console.log\\('length:', sp.length\\);\n  console.log\\('preview:', sp.slice\\(0, 120\\)\\);\n  process.exit\\(0\\);\n}\\).catch\\(e => { console.error\\(e.message\\); process.exit\\(1\\); }\\);\n\" 2>&1)",
      "Bash(cd /d/sxl/github/open-shadow/admin/server && node -e \"\nconst personaService = require\\('./services/personaService'\\);\npersonaService.get\\(\\).then\\(p => {\n  console.log\\(p.role_definition\\);\n  process.exit\\(0\\);\n}\\);\" 2>&1)"
    ]
  }
}
